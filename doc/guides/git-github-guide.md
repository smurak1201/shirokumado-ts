# Git と GitHub ガイド

## 目次

- [概要](#概要)
- [Git と GitHub の違い](#git-と-github-の違い)
- [基本用語の解説](#基本用語の解説)
  - [リポジトリ（Repository）](#リポジトリrepository)
  - [コミット（commit）](#コミットcommit)
  - [ブランチ（branch）](#ブランチbranch)
  - [HEAD](#head)
  - [main と origin/main の違い](#main-と-originmain-の違い)
- [基本操作の解説](#基本操作の解説)
  - [fetch（フェッチ）](#fetchフェッチ)
  - [pull（プル）](#pullプル)
  - [push（プッシュ）](#pushプッシュ)
  - [merge（マージ）](#mergeマージ)
  - [Pull Request（プルリクエスト）](#pull-requestプルリクエスト)
- [実務で使うワークフロー](#実務で使うワークフロー)
  - [なぜブランチを分けるのか](#なぜブランチを分けるのか)
  - [基本的な開発フロー](#基本的な開発フロー)
  - [ブランチ命名規則](#ブランチ命名規則)
- [よく使うコマンド一覧](#よく使うコマンド一覧)
  - [状態確認](#状態確認)
  - [ブランチ操作](#ブランチ操作)
  - [変更の保存と同期](#変更の保存と同期)
  - [履歴の確認](#履歴の確認)
- [トラブルシューティング](#トラブルシューティング)
  - [コンフリクト（競合）の解決](#コンフリクト競合の解決)
  - [間違えてコミットした場合](#間違えてコミットした場合)
  - [作業を一時退避したい（stash）](#作業を一時退避したいstash)
- [実務で役立つ Tips](#実務で役立つ-tips)
  - [コミットメッセージの書き方](#コミットメッセージの書き方)
  - [.gitignore の活用](#gitignore-の活用)
  - [差分の確認を習慣にする](#差分の確認を習慣にする)
- [まとめ](#まとめ)
- [参考リンク](#参考リンク)

## 概要

このガイドでは、Git と GitHub の基本概念と実務での使い方を解説します。実務経験がない方や、これまで main ブランチのみで作業していた方を対象に、チーム開発で必要な知識を身につけることを目指します。

## Git と GitHub の違い

まず、Git と GitHub は別物であることを理解しましょう。

| 項目 | Git | GitHub |
|------|-----|--------|
| 種類 | バージョン管理システム（ソフトウェア） | Web サービス（プラットフォーム） |
| 役割 | コードの変更履歴を管理する | Git リポジトリをクラウドでホスティングする |
| 動作場所 | ローカル（自分の PC） | リモート（インターネット上） |
| 料金 | 無料 | 無料プランあり（有料プランもあり） |

**例え話**:
- **Git** = 自分のノートに書いた日記（変更履歴を記録）
- **GitHub** = その日記を保管するクラウドストレージ + 共有機能

```
┌─────────────────┐                    ┌─────────────────┐
│   ローカル PC    │                    │     GitHub      │
│                 │                    │                 │
│  ┌───────────┐  │     push/pull      │  ┌───────────┐  │
│  │   Git     │  │ ◄─────────────────►│  │ リポジトリ │  │
│  │ リポジトリ │  │                    │  │  (リモート) │  │
│  └───────────┘  │                    │  └───────────┘  │
│                 │                    │                 │
└─────────────────┘                    └─────────────────┘
```

## 基本用語の解説

### リポジトリ（Repository）

リポジトリとは、プロジェクトのファイルと変更履歴を保存する場所です。

- **ローカルリポジトリ**: 自分の PC 上にあるリポジトリ
- **リモートリポジトリ**: GitHub など、インターネット上にあるリポジトリ

```bash
# リモートリポジトリをローカルにコピーする（クローン）
git clone https://github.com/username/repository.git
```

### コミット（commit）

コミットとは、ファイルの変更を**記録するスナップショット**です。ゲームのセーブポイントのようなものと考えてください。

```
コミットの履歴（時系列）

   コミット1 ──► コミット2 ──► コミット3 ──► コミット4
   (初期作成)    (機能A追加)   (バグ修正)    (機能B追加)
                                              ▲
                                              │
                                            現在地
```

**コミットに含まれる情報**:
- 変更内容（差分）
- コミットメッセージ（変更の説明）
- 作成者
- 日時
- 親コミットへの参照（履歴の繋がり）

```bash
# 変更をステージングエリアに追加
git add ファイル名

# 全ての変更をステージングに追加
git add .

# コミットを作成
git commit -m "コミットメッセージ"
```

**ステージングエリアとは**:

コミットする前の「準備場所」です。変更したファイルの中から、コミットしたいものだけを選んで追加できます。

```
┌─────────────┐    git add     ┌─────────────────┐   git commit   ┌─────────────┐
│  作業ディレクトリ │ ──────────► │ ステージングエリア │ ─────────────► │  リポジトリ  │
│  (編集中のファイル) │             │  (コミット準備)   │                │  (履歴保存)  │
└─────────────┘                └─────────────────┘               └─────────────┘
```

### ブランチ（branch）

ブランチとは、開発の**分岐**です。木の枝（branch）のように、メインの流れから分岐して独立した作業ができます。

```
              feature/login ブランチ
                    │
                    ▼
            ┌──► コミットA ──► コミットB
            │
main ブランチ │
    ──► コミット1 ──► コミット2 ──► コミット3
                            │
                            │     feature/cart ブランチ
                            │           │
                            └──► コミットX ──► コミットY
```

**なぜブランチを使うのか**:
- main ブランチを常に動作する状態に保てる
- 複数の機能を並行して開発できる
- 失敗しても main に影響しない

```bash
# ブランチの一覧を表示
git branch

# 新しいブランチを作成
git branch ブランチ名

# ブランチを切り替える
git switch ブランチ名

# ブランチの作成と切り替えを同時に行う
git switch -c ブランチ名
```

### HEAD

HEAD とは、**現在チェックアウトしているコミット**を指すポインタです。「今、自分がどこにいるか」を示します。

```
main ブランチ
    │
    ▼
──► コミット1 ──► コミット2 ──► コミット3
                                   ▲
                                   │
                                  HEAD（現在地）
```

通常、HEAD はブランチ名を指しており、そのブランチの最新コミットを示します。

```bash
# HEAD の位置を確認
git log --oneline -1

# 出力例: abc1234 (HEAD -> main) 最新のコミットメッセージ
```

### main と origin/main の違い

これは非常に重要な概念です。

| 名前 | 説明 | 場所 |
|------|------|------|
| `main` | ローカルの main ブランチ | 自分の PC |
| `origin/main` | リモートの main ブランチの**ローカルコピー** | 自分の PC（GitHub の状態を記録） |
| GitHub 上の main | 実際のリモートの main ブランチ | GitHub |

```
┌───────────────────────────────────────────────────────────────┐
│                        ローカル PC                             │
│                                                               │
│   main ブランチ               origin/main                      │
│   (作業用)                   (リモートの追跡用)                  │
│      │                           │                            │
│      ▼                           ▼                            │
│   コミット1 ─► コミット2 ─► コミット3                            │
│                          ▲                                    │
│                          │                                    │
│                    コミット1 ─► コミット2                        │
│                   (fetch で更新される)                          │
│                                                               │
└───────────────────────────────────────────────────────────────┘
                              │
                              │  fetch / push
                              ▼
┌───────────────────────────────────────────────────────────────┐
│                         GitHub                                │
│                                                               │
│   main ブランチ（実際のリモート）                                 │
│      │                                                        │
│      ▼                                                        │
│   コミット1 ─► コミット2                                        │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

**重要なポイント**:
- `origin/main` は自動では更新されない
- `git fetch` を実行すると `origin/main` が最新になる
- `git pull` は `fetch` + `merge` を一度に行う

## 基本操作の解説

### fetch（フェッチ）

fetch は、リモートリポジトリの最新情報を**ダウンロードする**操作です。ただし、ローカルの作業ブランチには影響しません。

```bash
# リモートの最新情報を取得
git fetch origin

# 特定のブランチのみ取得
git fetch origin main
```

**fetch が行うこと**:
1. GitHub 上の変更を確認
2. `origin/main` などの追跡ブランチを更新
3. ローカルの `main` ブランチは**変更しない**

```
fetch 前:
   ローカル main:    A ─► B ─► C
   origin/main:     A ─► B
   GitHub main:     A ─► B ─► D ─► E

fetch 後:
   ローカル main:    A ─► B ─► C      ← 変更なし
   origin/main:     A ─► B ─► D ─► E ← 更新された
   GitHub main:     A ─► B ─► D ─► E
```

### pull（プル）

pull は、リモートの変更を**ダウンロードして統合する**操作です。`fetch` + `merge` を一度に行います。

```bash
# リモートの変更を取得してマージ
git pull origin main
```

**pull が行うこと**:
1. `git fetch` でリモートの最新情報を取得
2. `git merge` でローカルブランチに統合

```
pull 前:
   ローカル main:    A ─► B ─► C
   GitHub main:     A ─► B ─► D ─► E

pull 後:
   ローカル main:    A ─► B ─► C ─► M（マージコミット）
                         └─► D ─► E ─┘
```

**fetch vs pull**:

| 操作 | 安全性 | 用途 |
|------|--------|------|
| fetch | 安全（ローカルに影響なし） | まず状況を確認したい時 |
| pull | 注意が必要（自動マージ） | すぐに最新化したい時 |

### push（プッシュ）

push は、ローカルの変更を**リモートにアップロードする**操作です。

```bash
# ローカルの変更をリモートに送信
git push origin main

# 初回 push 時（追跡ブランチを設定）
git push -u origin ブランチ名
```

```
push 前:
   ローカル main:    A ─► B ─► C ─► D
   GitHub main:     A ─► B

push 後:
   ローカル main:    A ─► B ─► C ─► D
   GitHub main:     A ─► B ─► C ─► D  ← 更新された
```

### merge（マージ）

merge は、あるブランチの変更を**別のブランチに統合する**操作です。

```bash
# main ブランチに切り替え
git switch main

# feature ブランチを main にマージ
git merge feature/login
```

**マージの種類**:

1. **Fast-forward マージ**（履歴が一直線の場合）
```
マージ前:
   main:     A ─► B
                  │
   feature:       └─► C ─► D

マージ後（fast-forward）:
   main:     A ─► B ─► C ─► D
```

2. **3-way マージ**（両方に変更がある場合）
```
マージ前:
   main:     A ─► B ─► E
                  │
   feature:       └─► C ─► D

マージ後（マージコミット作成）:
   main:     A ─► B ─► E ─────► M（マージコミット）
                  │             │
                  └─► C ─► D ───┘
```

### Pull Request（プルリクエスト）

Pull Request（PR）は、**GitHub 上でマージを依頼する機能**です。コードレビューを行い、問題がなければマージします。

**Pull Request の流れ**:

```
1. feature ブランチで開発
   main:     A ─► B
                  │
   feature:       └─► C ─► D

2. GitHub に push
   git push origin feature/login

3. GitHub で Pull Request を作成
   「feature/login を main にマージしてください」

4. レビュー・承認

5. マージ
   main:     A ─► B ─────────► M
                  │             │
   feature:       └─► C ─► D ───┘
```

**Pull Request のメリット**:
- コードレビューができる
- 変更内容を議論できる
- CI/CD（自動テスト）を実行できる
- マージ前に問題を発見できる

## 実務で使うワークフロー

### なぜブランチを分けるのか

**main ブランチのみで開発する問題点**:

1. **本番環境が壊れるリスク**: バグのあるコードが直接 main に入る
2. **並行開発ができない**: 一人が作業中は他の人が待つ必要がある
3. **レビューができない**: 変更がすぐに反映されてしまう
4. **ロールバックが困難**: どこまで戻せばいいかわからない

**ブランチを分ける開発**:

```
main（本番用）
  │
  ├─► feature/login（ログイン機能）  → レビュー後マージ
  │
  ├─► feature/cart（カート機能）    → レビュー後マージ
  │
  └─► fix/header-bug（バグ修正）    → レビュー後マージ
```

### 基本的な開発フロー

```
1. main ブランチを最新化
   git switch main
   git pull origin main

2. 作業用ブランチを作成
   git switch -c feature/新機能名

3. 開発作業（コードを書く）

4. 変更をコミット
   git add .
   git commit -m "機能の説明"

5. リモートに push
   git push -u origin feature/新機能名

6. GitHub で Pull Request を作成

7. レビュー・修正

8. マージ（GitHub 上で実行）

9. ローカルの main を最新化
   git switch main
   git pull origin main

10. 不要になったブランチを削除
    git branch -d feature/新機能名
```

### ブランチ命名規則

実務では、ブランチ名に規則を設けることが多いです。

| プレフィックス | 用途 | 例 |
|---------------|------|-----|
| `feature/` | 新機能開発 | `feature/user-login` |
| `fix/` | バグ修正 | `fix/header-layout` |
| `hotfix/` | 緊急修正 | `hotfix/security-patch` |
| `refactor/` | リファクタリング | `refactor/api-cleanup` |
| `docs/` | ドキュメント | `docs/api-reference` |

## よく使うコマンド一覧

### 状態確認

```bash
# 現在の状態を確認（変更ファイル、ブランチなど）
git status

# 変更内容の差分を確認
git diff

# ステージング済みの差分を確認
git diff --staged
```

### ブランチ操作

```bash
# ブランチ一覧を表示
git branch

# リモートブランチも含めて表示
git branch -a

# ブランチを作成して切り替え
git switch -c ブランチ名

# ブランチを切り替え
git switch ブランチ名

# ブランチを削除（マージ済みのみ）
git branch -d ブランチ名

# ブランチを強制削除
git branch -D ブランチ名
```

### 変更の保存と同期

```bash
# ファイルをステージングに追加
git add ファイル名
git add .  # 全ファイル

# コミットを作成
git commit -m "メッセージ"

# リモートから取得（統合なし）
git fetch origin

# リモートから取得して統合
git pull origin ブランチ名

# リモートに送信
git push origin ブランチ名
```

### 履歴の確認

```bash
# コミット履歴を表示
git log

# 簡潔に表示
git log --oneline

# グラフ表示
git log --oneline --graph

# 最新 5 件のみ表示
git log --oneline -5
```

## トラブルシューティング

### コンフリクト（競合）の解決

複数人が同じファイルの同じ箇所を変更すると、コンフリクトが発生します。

```
<<<<<<< HEAD
自分の変更内容
=======
相手の変更内容
>>>>>>> feature/other-branch
```

**解決手順**:

1. コンフリクトが発生したファイルを開く
2. `<<<<<<<`、`=======`、`>>>>>>>` の行を削除
3. 正しい内容に修正
4. ファイルを保存
5. コミット

```bash
# コンフリクト解決後
git add 解決したファイル
git commit -m "コンフリクトを解決"
```

### 間違えてコミットした場合

```bash
# 直前のコミットメッセージを修正（push 前のみ）
git commit --amend -m "新しいメッセージ"

# 直前のコミットを取り消し（変更は残す）
git reset --soft HEAD~1

# 直前のコミットを取り消し（変更も取り消す）※注意
git reset --hard HEAD~1
```

**警告**: `--hard` は変更が完全に消えるため、慎重に使用してください。

### 作業を一時退避したい（stash）

作業中に別のブランチで緊急対応が必要な場合、変更を一時退避できます。

```bash
# 現在の変更を退避
git stash

# 退避した内容を復元
git stash pop

# 退避リストを確認
git stash list
```

## 実務で役立つ Tips

### コミットメッセージの書き方

良いコミットメッセージの例:

```
# 良い例
ユーザー認証機能を追加
ヘッダーのレスポンシブ対応を修正
不要なコンソールログを削除

# 悪い例
修正
fix
update
作業中
```

**ポイント**:
- 何をしたかが分かるように書く
- 動詞から始める（追加、修正、削除など）
- 1 行目は 50 文字程度に収める

### .gitignore の活用

Git で管理しないファイルを指定します。

```gitignore
# 依存関係
node_modules/

# ビルド成果物
.next/
dist/

# 環境変数（機密情報）
.env
.env.local

# OS 関連
.DS_Store
Thumbs.db

# IDE 設定
.idea/
.vscode/
```

**このプロジェクトの .gitignore**: [.gitignore](../../.gitignore)

### 差分の確認を習慣にする

コミット前に必ず差分を確認しましょう。

```bash
# 変更内容を確認
git diff

# ステージング済みの変更を確認
git diff --staged

# 変更ファイルの一覧
git status
```

## まとめ

| 用語 | 説明 |
|------|------|
| Git | バージョン管理システム（ローカル） |
| GitHub | Git リポジトリのホスティングサービス |
| commit | 変更を記録するスナップショット |
| branch | 開発の分岐 |
| HEAD | 現在の位置を示すポインタ |
| main | ローカルのメインブランチ |
| origin/main | リモートの main を追跡するブランチ |
| fetch | リモートの情報を取得（統合なし） |
| pull | リモートの変更を取得して統合 |
| push | ローカルの変更をリモートに送信 |
| merge | ブランチを統合 |
| Pull Request | マージをリクエストする GitHub の機能 |

**実務での基本フロー**:
1. main から作業ブランチを作成
2. 開発・コミット
3. push して Pull Request 作成
4. レビュー後にマージ
5. main を最新化

## 参考リンク

- [Git 公式ドキュメント](https://git-scm.com/doc)
- [GitHub Docs](https://docs.github.com/ja)
- [サル先生の Git 入門](https://backlog.com/ja/git-tutorial/)
- [Learn Git Branching](https://learngitbranching.js.org/?locale=ja)（インタラクティブ学習）

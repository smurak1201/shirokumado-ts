# Claude Code 設定

## 言語設定

- すべての出力は日本語で行うこと
- コミットメッセージ、コードコメント、説明文はすべて日本語で記述すること

## 基本的なルール

- **import文**: 未使用のインポートは削除すること
- **ダミーのコード**: 動作しない仮置きの関数や変数は含めないこと
- **コメント**: コードで意図が明確な場合は不要。補足が必要な場合のみ簡潔に記述
- **修正範囲**: 依頼された部分以外は原則として変更しないこと

## 設計原則

- **単一責任**: 機能単位でコードを分割すること
- **YAGNI**: 現時点で必要な機能のみ実装すること
- **KISS**: 最もシンプルな解決策を選ぶこと
- **DRY**: 3箇所目で共通化を検討。似ているだけのロジックは無理に共通化しない
- **モバイルファースト**: スマートフォン向けのデザインを基本とし、大きな画面へ拡張すること

## 型とコード品質

- 関数の引数と返り値には型を付けること
- リントエラーを解消すること
- ハードコードとマジックナンバーを避け、定数として一元管理すること

## React / Next.js

> 参考: [Vercel React Best Practices](https://vercel.com/blog/introducing-react-best-practices)

### パフォーマンス

- **独立した非同期操作は`Promise.all()`で並列実行すること**
- **重いコンポーネントは`next/dynamic`で動的インポートすること**
- **派生状態はレンダリング中に計算すること**（useState + useEffectで同期しない）
- **単純な式を`useMemo`でラップしないこと**

### Server Components

- **デフォルトで Server Components を使用すること**
- **Server Actionsでも認証を検証すること**
- **RSC境界ではクライアントが必要なフィールドのみ渡すこと**

### コンポーネント設計

- **単一責任**: 各コンポーネントは1つの責務を持つこと
- **状態のリフトアップ**: 共有状態は親コンポーネントで管理
- **カスタムフック**: `use`プレフィックス（例: `useAuth`）
- **イベントハンドラー**: `handle`プレフィックス（例: `handleSubmit`）

### エラーハンドリング

- **非同期処理には必ずtry-catchを実装すること**
- **エラーメッセージはユーザーにとって分かりやすく**
- **API Routesではエラーハンドリングを統一すること**

### セキュリティ

- **ユーザー入力はサニタイズすること**
- **`dangerouslySetInnerHTML`は原則使用禁止**
- **環境変数の`NEXT_PUBLIC_`プレフィックスの有無を意識すること**

## Tailwind CSS

- **ユーティリティクラスを直接使用すること**
- **動的クラス名（`bg-${color}-500`）を避けること**
- **モバイルファースト**: `sm:`, `md:`, `lg:` で拡張

## アクセシビリティ

- **セマンティックHTML**: 適切なタグ（`<header>`, `<main>`, `<nav>`等）を使用すること
- **aria属性**: アイコンボタンには`aria-label`を設定すること

## 画像

- **`next/image`を使用すること**: 自動最適化、遅延読み込み、レスポンシブ対応

## 品質チェックリスト

- [ ] この機能は**今**必要か？（YAGNI）
- [ ] もっとシンプルな方法はないか？（KISS）
- [ ] 独立した非同期処理は並列化しているか？
- [ ] エラーハンドリングは実装されているか？

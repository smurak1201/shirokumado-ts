# Claude Code 設定 - 白熊堂プロジェクト

## 言語設定

- すべての出力は日本語で行ってください
- コミットメッセージ、コードコメント、説明文はすべて日本語で記述してください

## コミットメッセージ

- コミットメッセージは必ず日本語で記述してください
- 変更内容を簡潔に日本語で記述してください
- 例: "商品名の表示を2行固定に変更"
- 例: "スマホでも3列タイル表示を維持するように修正"
- 例: "商品タイルコンポーネントのスタイルを調整"

## コードコメント

- コードコメントは日本語で記述してください
- 関数やクラスの説明は日本語で記述してください

## 基本的なルール

- **コードの品質**: 常にクリーンで、効率的、そして可読性の高いコードを生成してください
- **コードのリファクタリング**: 既存のコードをリファクタリングする際は、ロジックを機能単位で適切な関数に分割し、可読性と保守性を高めることを意識してください
- **import文**: 未使用のインポートは削除してください。既存のコードを扱う際は、使用中のimport文を勝手に変更・削除しないでください
- **ダミーのコード**: 動作しない、あるいは仮置きの関数や変数は含めないでください
- **コメント**: コードだけで意図が明確に伝わる場合、コメントは不要です。複雑なアルゴリズムや、特定のライブラリの少し特殊な使い方など、補足が必要な場合にのみ簡潔なコメントを記述してください
- **修正範囲**: ユーザーからの修正依頼があった部分以外は、原則として変更しないでください

## 設計原則

### 単一責任原則

機能を追加する場合は単一責任原則に基づいてコードを分割することを最優先とする

### YAGNI - 必要になるまで実装しない

- 現時点で必要な機能のみ実装すること
- 「将来使うかも」という理由で拡張機能を追加しないこと

### KISS - シンプルに保つ

- 最もシンプルな解決策を選ぶこと
- 複雑なパターンより単純な関数を優先すること

### DRY - 賢く適用

- 明確な重複パターンがある場合のみ共通化すること
- 2箇所なら重複を許容し、3箇所目で共通化を検討すること
- 似ているだけの異なるロジックを無理に共通化しないこと

## 型とコード品質

- **関数定義時には引数と返り値の型ヒントを必ず付けること**
- リントエラーを解消すること
- 修正を行う場合は可能な限り最小限の修正で済ませること
- **ハードコードとマジックナンバーを避けること**: 設定値や定数は `lib/config.ts` などで一元管理すること

## React のベストプラクティス

### Server Components と Client Components

- **デフォルトで Server Components を使用すること**: インタラクティブな機能が必要な場合のみ `"use client"` を追加
- **データフェッチは Server Components で行うこと**
- **Client Components は必要最小限にすること**: 状態管理やイベントハンドリングが必要な場合のみ使用

### コンポーネント設計

- **単一責任の原則**: 各コンポーネントは1つの責務を持つこと
- **状態のリフトアップ**: 共有状態は親コンポーネントで管理し、propsで子コンポーネントに渡すこと
- **型安全性**: コンポーネントのpropsには必ず型を付けること

### Hooks の使用

- **useState**: コンポーネント内のローカル状態管理に使用
- **useEffect**: 副作用の処理に使用。クリーンアップ処理を忘れないこと
- **useCallback**: propsとして子コンポーネントに渡す関数に使用
- **useMemo**: フィルタリング、ソート、グループ化などの重い計算処理に使用
- **カスタムフック**: `use`で始める命名規則（例: `useProductForm`, `useTabState`）

### イベントハンドリング

- **イベントハンドラーの命名**: `handle`で始めること（例: `handleClick`, `handleSubmit`）
- **非同期処理**: エラーハンドリングを必ず実装すること

### アクセシビリティ

- **aria-label**: アイコンや装飾的な要素には`aria-label`を設定すること
- **セマンティックHTML**: 適切なHTML要素を使用すること

## Tailwind CSS のベストプラクティス（v4）

### 基本方針

- **ユーティリティクラスを直接使用すること**: Tailwind の標準クラスをそのまま使用する
- **`@apply` は使用しないこと**: v4 では非推奨。代わりにラッパーコンポーネントを使用する
- **動的クラス名を避けること**: `bg-${color}-500` のような動的生成は使用しない（ビルド時に検出できない）

### テーマカスタマイズ

- **`@theme` ディレクティブを使用すること**: `globals.css` の `@theme inline` ブロックでテーマ変数を定義
- **CSS変数を活用すること**: テーマ全体で統一したい色やスペーシングは CSS 変数として定義

### スタイルの再利用

- **2-3箇所程度**: 明示的なクラス指定をそのまま使用
- **複雑なスタイル**: ラッパーコンポーネントを作成（例: `card-product.tsx`）
- **テーマレベル**: `@theme` 変数で定義

### レスポンシブデザイン

- **モバイルファースト**: デフォルトはモバイル、`sm:`, `md:`, `lg:` で拡張
- **一貫したブレークポイント**: プロジェクト全体で同じブレークポイントを使用

## shadcn/ui のベストプラクティス

### 基本方針

- **コンポーネントをそのまま使用すること**: shadcn/ui のコンポーネントは `app/components/ui/` に配置
- **カスタマイズは最小限に**: 必要な場合のみラッパーコンポーネントを作成

### ラッパーコンポーネント

- **命名規則**: 用途を明確にする（例: `card-product.tsx`, `badge-price.tsx`）
- **`cn()` ユーティリティを使用すること**: クラス名の結合には `cn()` を使用
- **props を透過的に渡すこと**: `...props` でベースコンポーネントに props を渡す

```tsx
// 良い例
export function ProductCard({ className, ...props }: ProductCardProps) {
  return (
    <Card className={cn("カスタムクラス", className)} {...props} />
  );
}
```

### 既存のラッパーコンポーネント

- `card-product.tsx`: 商品タイル用
- `card-modal.tsx`: モーダル内のカード用
- `card-faq.tsx`: FAQ カード用
- `badge-price.tsx`: 価格表示用
- `badge-question.tsx`: 質問バッジ用

## 品質チェックリスト

実装前に以下を確認すること：

- [ ] この機能は**今**必要か？（YAGNI）
- [ ] もっとシンプルな方法はないか？（KISS）
- [ ] 同じロジックが複数箇所に存在しないか？（DRY）
- [ ] 設定値や定数は一元管理されているか？

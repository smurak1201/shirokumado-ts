# Claude Skills 完全ガイド

## このドキュメントの役割

このドキュメントは「**Claude Skills（スキル）の構築方法**」の完全ガイドです。再利用可能なワークフローコンポーネントを作成し、一貫性のある自動化を実現したいときに参照してください。

**Anthropic公式ガイドの日本語訳**: このドキュメントは[The Complete Guide to Building Skills for Claude](https://claude.com/blog/complete-guide-to-building-skills-for-claude)を基に作成されています。

**関連ドキュメント**:
- [Anthropic Skills ドキュメント](https://docs.anthropic.com/en/docs/build-with-claude/skills)
- [MCP ドキュメント](https://modelcontextprotocol.io/)

## 目次

- [はじめに](#はじめに)
- [クイックスタート: 5ステップで最初のスキルを作る](#クイックスタート-5ステップで最初のスキルを作る)
- [Claude Skills とは](#claude-skills-とは)
- [対象読者](#対象読者)
- [基礎知識](#基礎知識)
  - [スキルの構造](#スキルの構造)
  - [Skills と他のツールの違い](#skills-と他のツールの違い)
  - [コア設計原則](#コア設計原則)
  - [Skills + MCP](#skills--mcp)
- [計画と設計](#計画と設計)
  - [ユースケースから始める](#ユースケースから始める)
  - [一般的なスキルのカテゴリ](#一般的なスキルのカテゴリ)
  - [成功基準の定義](#成功基準の定義)
  - [技術要件](#技術要件)
  - [効果的なスキルの書き方](#効果的なスキルの書き方)
- [実装パターン](#実装パターン)
  - [パターン1: シーケンシャルワークフロー](#パターン1-シーケンシャルワークフロー)
  - [パターン2: マルチMCP連携](#パターン2-マルチmcp連携)
  - [パターン3: 反復改善](#パターン3-反復改善)
  - [パターン4: コンテキスト対応ツール選択](#パターン4-コンテキスト対応ツール選択)
  - [パターン5: ドメイン固有のインテリジェンス](#パターン5-ドメイン固有のインテリジェンス)
- [テストと反復](#テストと反復)
  - [推奨テストアプローチ](#推奨テストアプローチ)
  - [skill-creatorの使用](#skill-creatorの使用)
  - [フィードバックに基づく改善](#フィードバックに基づく改善)
- [配布と共有](#配布と共有)
  - [現在の配布モデル](#現在の配布モデル)
  - [API経由でのスキル使用](#api経由でのスキル使用)
  - [推奨アプローチ](#推奨アプローチ)
  - [スキルのポジショニング](#スキルのポジショニング)
- [トラブルシューティング](#トラブルシューティング)
- [リファレンス](#リファレンス)
  - [YAMLフロントマター完全仕様](#yamlフロントマター完全仕様)
  - [クイックチェックリスト](#クイックチェックリスト)
- [まとめ](#まとめ)
- [参考リンク](#参考リンク)

## はじめに

**スキル**とは、特定のタスクやワークフローの処理方法をClaudeに教える指示セットです。シンプルなフォルダとしてパッケージ化され、Claudeの能力をカスタマイズする最も強力な方法の1つです。

スキルを使用することで、毎回同じ好み、プロセス、ドメインの専門知識を説明し直す必要がなくなります。一度教えれば、毎回恩恵を受けられます。

### スキルが威力を発揮する場面

- **繰り返し可能なワークフロー**: 仕様からフロントエンドデザインを生成、一貫した方法論での調査、チームのスタイルガイドに従ったドキュメント作成など
- **複数ステップのプロセス**: Claudeの組み込み機能（コード実行、ドキュメント作成など）と連携
- **MCP統合**: 生のツールアクセスを信頼性の高い最適化されたワークフローに変換

### このガイドで学べること

- スキル構造の技術要件とベストプラクティス
- スタンドアロンスキルとMCP拡張ワークフローのパターン
- 様々なユースケースで効果的なパターン
- テスト、反復、配布の方法


## クイックスタート: 5ステップで最初のスキルを作る

詳しい設計手法は後のセクションで説明しますが、まずは最小限の手順で動くスキルを作ってみましょう。skill-creatorを使用すれば**15〜30分**で最初のスキルが完成します。

### ステップ1: 要件を理解する

自動化したいタスクを1つ選び、以下を明確にする:

- 何を解決するか？
- 何がトリガーになるか？（ユーザーがどんな言葉で依頼するか）
- 成功とは何か？

### ステップ2: スキル名を設定する

ケバブケースで名前を決める（例: `pdf-editor`、`sprint-planner`）。

### ステップ3: description（説明）を書く

スキルの「何をするか」と「いつ使うか」を含める。Claudeはこの説明を見てスキルを読み込むか判断する。

```yaml
---
name: pdf-editor
description: テキスト・テーブル抽出、PDF生成、ドキュメント統合に対応。フォーム記入やPDF処理が必要な場合に使用。
---
```

### ステップ4: メイン指示を記述する

SKILL.md本文に、ステップバイステップの手順を書く。

### ステップ5: アップロードしてテストする

- **Claude.ai**: 設定 > 機能 > スキルからアップロード
- **Claude Code**: スキルディレクトリに配置

最小限の動くスキルから始めて、使いながら改善していくのが最も効果的です。各ステップの詳細は、以降のセクションで解説します。

## Claude Skills とは

スキルは、**指示、スクリプト、リソースを含むフォルダ**です。Claudeは関連するタスクを検出すると、スキルを**動的に発見し読み込みます**。

**具体例**:
- コードレビューの自動化
- ドキュメント生成
- データ分析パイプライン
- テスト実行とレポート作成
- デプロイメントワークフロー

**主な価値**:
- **再利用性**: 一度作成すれば繰り返し使用可能
- **一貫性**: 組織全体で統一されたワークフロー
- **効率性**: 手作業を自動化し、生産性を向上
- **移植性**: Claude.ai、Claude Code、APIで同一動作
- **組織知識の保存**: 社内の手順やベストプラクティスをスキルとして保存し、誰でも専門家レベルの結果を得られる

## 対象読者

ワークフローの自動化や標準化に興味がある開発者、チームリーダー、パワーユーザーを対象としています。プログラミング経験は不要ですが、Markdownの基礎知識があると理解しやすくなります。

## 基礎知識

### スキルの構造

スキルはフォルダで構成されます：

```
your-skill-name/
├── SKILL.md              # 必須 - YAMLフロントマター付きのメイン指示
├── scripts/              # オプション - 実行可能コード
│   ├── process_data.py
│   └── validate.sh
├── references/           # オプション - 必要に応じて読み込まれるドキュメント
│   ├── api-guide.md
│   └── examples/
└── assets/               # オプション - テンプレート、フォント、アイコン
    └── report-template.md
```

#### 重要なルール

**SKILL.mdの命名**:
- 正確に`SKILL.md`でなければならない（大文字小文字を区別）
- バリエーションは不可（SKILL.MD、skill.mdなど）

**スキルフォルダの命名**:
- 推奨: ケバブケースを使用: `notion-project-setup`
- 不可: スペース不可: `Notion Project Setup`
- 不可: アンダースコア不可: `notion_project_setup`
- 不可: 大文字不可: `NotionProjectSetup`

**README.mdの禁止**:
- スキルフォルダ内に`README.md`を含めない
- すべてのドキュメントは`SKILL.md`または`references/`に配置
- 注: GitHubで配布する場合、リポジトリレベルのREADMEは必要（人間のユーザー向け）

### Skills と他のツールの違い

Claudeにはスキル以外にも情報を提供する仕組みがあります。それぞれの役割と使い分けを理解しましょう。

| 側面 | Skills | プロンプト | Projects | サブエージェント | MCP |
|------|--------|----------|----------|-------------|-----|
| 提供するもの | 手順知識 | リアルタイム指示 | 背景知識 | タスク委譲 | ツール接続 |
| 永続性 | 複数会話にまたがる | 単一会話のみ | プロジェクト内 | セッション間 | 継続的接続 |
| 読み込み | 必要時に動的 | 毎ターン | 常時 | 呼び出し時 | 常時利用可能 |
| 最適な用途 | 繰り返し使う専門知識 | 一度きりの指示 | 参照資料の共有 | 特定タスクの委譲 | 外部データアクセス |

**使い分けのポイント**:

- **プロンプト vs Skills**: 同じ手順を繰り返し使うならSkills、一度きりの指示ならプロンプト
- **Projects vs Skills**: 静的な参照資料（社内規約など）はProjects、動的に活性化する手順はSkills
- **MCP vs Skills**: 外部ツールへの接続はMCP、その使い方の教示はSkills（詳しくは後述の「Skills + MCP」を参照）

### コア設計原則

#### 1. プログレッシブディスクロージャー（段階的開示）

スキルは3レベルシステムを使用します：

**第1レベル（YAMLフロントマター）** — 約100トークン:
- 常にClaudeのシステムプロンプトに読み込まれる
- スキルをいつ使用すべきかを判断するための最小限の情報
- すべてをコンテキストに読み込まずに済む

**第2レベル（SKILL.md本文）** — 5,000トークン未満が推奨:
- Claudeがスキルが現在のタスクに関連すると判断したときに読み込まれる
- 完全な指示とガイダンスを含む

**第3レベル（リンクされたファイル）**:
- スキルディレクトリ内にバンドルされた追加ファイル
- Claudeが必要に応じて選択的に参照

この段階的開示により、専門的な知識を維持しながらトークン使用を最小化します。

#### 2. コンポーザビリティ（組み合わせ可能性）

Claudeは複数のスキルを同時に読み込めます。あなたのスキルは他のスキルと協調して動作すべきで、唯一の機能であると仮定しないでください。

#### 3. ポータビリティ（移植性）

スキルはClaude.ai、Claude Code、APIで同一に動作します。一度作成すれば、すべての環境で変更なしに動作します（環境がスキルの依存関係をサポートしている場合）。

### Skills + MCP

スタンドアロンスキルのみを構築する場合は、このセクションをスキップして「計画と設計」に進んでください。後でいつでも戻れます。

#### キッチンの比喩

すでに動作するMCPサーバーがあれば、難しい部分は完了しています。スキルはその上の知識レイヤーで、あなたがすでに知っているワークフローとベストプラクティスを取り込み、Claudeが一貫して適用できるようにします。

**MCPはプロフェッショナルキッチンを提供**:
- ツール、材料、設備へのアクセス

**スキルはレシピを提供**:
- 価値あるものを作成するためのステップバイステップの指示

**一緒に使うことで**:
- ユーザーは各ステップを自分で考える必要なく、複雑なタスクを達成できる

#### 連携方法

| MCP（接続性） | Skills（知識） |
|--------------|---------------|
| Claudeをサービスに接続（Notion、Asana、Linearなど） | Claudeにサービスの効果的な使用方法を教える |
| リアルタイムデータアクセスとツール呼び出しを提供 | ワークフローとベストプラクティスを取り込む |
| Claudeに**何ができるか** | Claudeに**どうすべきか** |

#### MCPユーザーにとっての重要性

**スキルなしの場合**:
- ユーザーはMCPに接続するが、次に何をすべきかわからない
- 「統合でXをする方法は？」というサポートチケット
- 毎回の会話がゼロから開始
- ユーザーのプロンプトが異なるため、結果が不一致
- 本当の問題はワークフローガイダンスなのに、コネクターが非難される

**スキルありの場合**:
- 事前構築されたワークフローが必要時に自動起動
- 一貫性のある信頼できるツール使用
- すべてのインタラクションにベストプラクティスが組み込まれる
- 統合の学習曲線が低下

## 計画と設計

### ユースケースから始める

コードを書く前に、スキルが実現すべき2〜3の具体的なユースケースを特定します。

**良いユースケース定義の例**:

```
ユースケース: プロジェクトスプリント計画

トリガー: ユーザーが「このスプリントの計画を手伝って」
         または「スプリントタスクを作成」と言う

ステップ:
1. Linear（MCP経由）から現在のプロジェクトステータスを取得
2. チームのベロシティとキャパシティを分析
3. タスクの優先順位付けを提案
4. 適切なラベルと見積もりでLinearにタスクを作成

結果: タスクが作成された完全に計画されたスプリント
```

**自問すべき質問**:
- ユーザーは何を達成したいか？
- これにはどのような複数ステップのワークフローが必要か？
- どのツールが必要か（組み込みまたはMCP）？
- どのようなドメイン知識やベストプラクティスを組み込むべきか？

### 一般的なスキルのカテゴリ

Anthropicでは、3つの一般的なユースケースを観察しています：

#### カテゴリ1: ドキュメント＆アセット作成

**用途**: ドキュメント、プレゼンテーション、アプリ、デザイン、コードなど、一貫性のある高品質な出力の作成

**実例**: `frontend-design`スキル（`docx`、`pptx`、`xlsx`、`ppt`スキルも参照）

> 「独特で本番グレードのフロントエンドインターフェースを高いデザイン品質で作成。Webコンポーネント、ページ、アーティファクト、ポスター、アプリケーション構築時に使用」

**主要テクニック**:
- 組み込まれたスタイルガイドとブランド基準
- 一貫した出力のためのテンプレート構造
- 最終化前の品質チェックリスト
- 外部ツール不要 - Claudeの組み込み機能を使用

#### カテゴリ2: ワークフロー自動化

**用途**: 複数MCPサーバー間の調整を含む、一貫した方法論が有益な複数ステップのプロセス

**実例**: `skill-creator`スキル

> 「新しいスキル作成のためのインタラクティブガイド。ユースケース定義、フロントマター生成、指示作成、検証を順番に案内」

**主要テクニック**:
- 検証ゲート付きのステップバイステップワークフロー
- 共通構造のテンプレート
- 組み込まれたレビューと改善提案
- 反復改善ループ

#### カテゴリ3: MCP拡張

**用途**: MCPサーバーが提供するツールアクセスを強化するワークフローガイダンス

**実例**: `sentry-code-review`スキル（Sentryより）

> 「SentryのMCPサーバー経由でSentryのエラー監視データを使用し、GitHub Pull Request内で検出されたバグを自動的に分析・修正」

**主要テクニック**:
- 複数のMCP呼び出しを順序立てて調整
- ドメインの専門知識を組み込み
- ユーザーが他の方法で指定する必要があるコンテキストを提供
- 一般的なMCPの問題に対するエラーハンドリング

### 成功基準の定義

これらは厳密な閾値ではなく、大まかなベンチマークです。厳密さを目指しつつも、評価には感覚的な要素があることを受け入れてください。Anthropicは現在、より堅牢な測定ガイダンスとツールを開発中です。

#### 定量的メトリクス

**1. 関連クエリの90%でスキルがトリガーされる**

測定方法:
- スキルをトリガーすべき10〜20のテストクエリを実行
- 明示的な呼び出しが必要な回数vs自動的に読み込まれる回数を追跡

**2. Xツール呼び出しでワークフローを完了**

測定方法:
- スキル有効・無効で同じタスクを比較
- ツール呼び出し数と消費トークン総数をカウント

**3. ワークフローごとに0回のAPI呼び出し失敗**

測定方法:
- テスト実行中にMCPサーバーログを監視
- リトライ率とエラーコードを追跡

#### 定性的メトリクス

**1. ユーザーが次のステップについてClaudeにプロンプトする必要がない**

評価方法:
- テスト中に、リダイレクトや明確化が必要な頻度を記録
- ベータユーザーからフィードバックを求める

**2. ユーザーの修正なしでワークフローが完了**

評価方法:
- 同じリクエストを3〜5回実行
- 出力の構造的一貫性と品質を比較

**3. セッション間で一貫した結果**

評価方法:
- 新しいユーザーが最初の試行で最小限のガイダンスでタスクを達成できるか？

### 技術要件

#### SKILL.md: YAMLフロントマター

YAMLフロントマターは、Claudeがスキルを読み込むかどうかを決定する方法です。これを正しく設定することが重要です。

**最小限の必須フォーマット**:

```yaml
---
name: your-skill-name
description: 何をするか。[具体的なフレーズ]を求められたときに使用。
---
```

これだけで開始できます。

#### フィールド要件

**name（必須）**:
- ケバブケースのみ
- スペースや大文字不可
- フォルダ名と一致すべき

**description（必須）**:
- 以下の**両方**を含む必要がある:
  - スキルが何をするか
  - いつ使用するか（トリガー条件）
- 1024文字未満
- XMLタグ（`<`または`>`）不可
- ユーザーが言いそうな具体的なタスクを含める
- 関連する場合、ファイルタイプに言及

**license（オプション）**:
- オープンソースにする場合に使用
- 一般的: MIT、Apache-2.0

**compatibility（オプション）**:
- 1〜500文字
- 環境要件を示す（対象製品、必要なシステムパッケージ、ネットワークアクセスニーズなど）

**metadata（オプション）**:
- 任意のカスタムキーバリューペア
- 推奨: author、version、mcp-server
- 例:
```yaml
metadata:
  author: ProjectHub
  version: 1.0.0
  mcp-server: projecthub
```

#### セキュリティ制限

**フロントマターで禁止されているもの**:
- XML角括弧（`<` `>`）
- 名前に「claude」または「anthropic」を含むスキル（予約済み）

理由: フロントマターはClaudeのシステムプロンプトに表示されます。悪意のあるコンテンツが指示を注入する可能性があります。

### 効果的なスキルの書き方

#### descriptionフィールド

Anthropicのエンジニアリングブログによると：「このメタデータは...Claudeがすべてをコンテキストに読み込むことなく、各スキルをいつ使用すべきかを知るための十分な情報を提供します」。これがプログレッシブディスクロージャーの第1レベルです。

Claudeはキーワードのマッチングではなく、**意味的な関連性**でスキルを読み込むか判断します。そのため、descriptionが曖昧だとトリガー精度が低下します。

**構造**:
```
[何をするか] + [いつ使用するか] + [主要機能]
```

**良いdescriptionの例**:

```yaml
# 良い - 具体的で実行可能
description: Figmaデザインファイルを分析し、開発者ハンドオフドキュメントを生成。ユーザーが.figファイルをアップロード、「デザイン仕様」、「コンポーネントドキュメント」、「デザイン-コードハンドオフ」を求めるときに使用。

# 良い - トリガーフレーズを含む
description: スプリント計画、タスク作成、ステータス追跡を含むLinearプロジェクトワークフローを管理。ユーザーが「スプリント」、「Linearタスク」、「プロジェクト計画」に言及、または「チケットを作成」を求めるときに使用。

# 良い - 明確な価値提案
description: PayFlowのエンドツーエンド顧客オンボーディングワークフロー。アカウント作成、支払い設定、サブスクリプション管理を処理。ユーザーが「新規顧客をオンボード」、「サブスクリプションを設定」、「PayFlowアカウントを作成」と言うときに使用。
```

**悪いdescriptionの例**:

```yaml
# 曖昧すぎる
description: プロジェクトを支援。

# トリガーがない
description: 洗練された複数ページのドキュメントシステムを作成。

# 技術的すぎる、ユーザートリガーがない
description: 階層的関係を持つProjectエンティティモデルを実装。
```

**同じスキルでの弱い例と強い例の比較**:

```yaml
# 弱い例 - 曖昧で、いつ使うか不明
description: PDFとドキュメント処理を支援。

# 強い例 - 具体的な機能とトリガーを明示
description: テキスト・テーブル抽出、PDF生成、ドキュメント統合、フォーム処理に対応。フォーム記入や大規模PDF処理が必要な場合に使用。
```

強い例では、具体的な動詞（抽出、生成、統合）、具体的なユースケース（フォーム記入、大規模処理）、明確な境界を含んでいます。

#### メイン指示の書き方

フロントマターの後、Markdownで実際の指示を書きます。

**推奨構造**:

```markdown
---
name: your-skill
description: [説明...]
---

# Your Skill Name

# 指示

## ステップ1: [最初の主要ステップ]

何が起こるかの明確な説明。

例:
```bash
python scripts/fetch_data.py --project-id PROJECT_ID
```

期待される出力: [成功がどのように見えるかを説明]

（必要に応じてステップを追加）

## 例

### 例1: [一般的なシナリオ]

ユーザーが言う: 「新しいマーケティングキャンペーンを設定」

アクション:
1. MCP経由で既存キャンペーンを取得
2. 提供されたパラメータで新規キャンペーンを作成

結果: 確認リンク付きでキャンペーンが作成される

（必要に応じて例を追加）

## トラブルシューティング

### エラー: [一般的なエラーメッセージ]

原因: [なぜ発生するか]
解決策: [どう修正するか]

（必要に応じてエラーケースを追加）
```

#### 指示のベストプラクティス

**1. 具体的で実行可能に**

良い例:
```markdown
`python scripts/validate.py --input {filename}`を実行してデータフォーマットをチェック。

検証が失敗した場合、一般的な問題:
- 必須フィールドの欠落（CSVに追加）
- 無効な日付フォーマット（YYYY-MM-DDを使用）
```

悪い例:
```markdown
続行前にデータを検証。
```

**2. エラーハンドリングを含める**

```markdown
## 一般的な問題

### MCP接続失敗

「Connection refused」が表示された場合:
1. MCPサーバーが実行中か確認: 設定 > 拡張機能をチェック
2. APIキーが有効か確認
3. 再接続を試す: 設定 > 拡張機能 > [サービス] > 再接続
```

**3. バンドルされたリソースを明確に参照**

```markdown
クエリを書く前に、`references/api-patterns.md`を参照:
- レート制限ガイダンス
- ページネーションパターン
- エラーコードと処理
```

**4. プログレッシブディスクロージャーを使用**

SKILL.mdはコア指示に集中させます。詳細なドキュメントは`references/`に移動し、リンクします。（3レベルシステムの動作については「コア設計原則」を参照）

スキルが複数のプロセスをカバーする場合、SKILL.mdには利用可能な機能の概要のみ記述し、各プロセスの詳細は別ファイルに相対パスで参照します。Claudeはユーザーのタスクに関連するファイルのみを読み込みます。

```markdown
# ドキュメント処理スキル

以下のワークフローに対応:
- PDF読み取り → `references/pdf-reading.md`を参照
- PDF生成 → `references/pdf-creation.md`を参照
- ドキュメント統合 → `references/merging.md`を参照
```

## 実装パターン

これらのパターンは、早期採用者や社内チームが作成したスキルから生まれました。効果的であることが確認された一般的なアプローチを表しており、規範的なテンプレートではありません。

### アプローチの選択: 問題優先 vs ツール優先

ホームデポ（ホームセンター）を考えてください。「キッチンキャビネットを修理する必要がある」という問題を持って入店し、従業員が適切なツールを示すかもしれません。または、新しいドリルを選んで、特定の仕事にどう使うか尋ねるかもしれません。

スキルも同様に機能します：

- **問題優先**: 「プロジェクトワークスペースを設定する必要がある」→ スキルが正しい順序で適切なMCP呼び出しを調整。ユーザーは結果を説明し、スキルがツールを処理。

- **ツール優先**: 「Notion MCPに接続した」→ スキルがClaudeに最適なワークフローとベストプラクティスを教える。ユーザーはアクセスを持ち、スキルが専門知識を提供。

ほとんどのスキルはどちらかに偏ります。どちらのフレーミングがユースケースに合うかを知ることで、以下の適切なパターンを選択できます。

### パターン1: シーケンシャルワークフロー

**使用場面**: ユーザーが特定の順序で複数ステップのプロセスを必要とする場合

**構造例**:

```markdown
# ワークフロー: 新規顧客オンボーディング

## ステップ1: アカウント作成
MCPツールを呼び出し: `create_customer`
パラメータ: name、email、company

## ステップ2: 支払い設定
MCPツールを呼び出し: `setup_payment_method`
待機: 支払い方法の検証

## ステップ3: サブスクリプション作成
MCPツールを呼び出し: `create_subscription`
パラメータ: plan_id、customer_id（ステップ1から）

## ステップ4: ウェルカムメール送信
MCPツールを呼び出し: `send_email`
テンプレート: welcome_email_template
```

**主要テクニック**:
- 明示的なステップ順序
- ステップ間の依存関係
- 各段階での検証
- 失敗時のロールバック指示

### パターン2: マルチMCP連携

**使用場面**: ワークフローが複数のサービスにまたがる場合

**例**: デザイン-開発ハンドオフ

```markdown
## フェーズ1: デザインエクスポート（Figma MCP）
1. Figmaからデザインアセットをエクスポート
2. デザイン仕様を生成
3. アセットマニフェストを作成

## フェーズ2: アセット保存（Drive MCP）
1. Driveにプロジェクトフォルダを作成
2. すべてのアセットをアップロード
3. 共有可能なリンクを生成

## フェーズ3: タスク作成（Linear MCP）
1. 開発タスクを作成
2. アセットリンクをタスクに添付
3. エンジニアリングチームに割り当て

## フェーズ4: 通知（Slack MCP）
1. #engineeringにハンドオフサマリーを投稿
2. アセットリンクとタスク参照を含める
```

**主要テクニック**:
- 明確なフェーズ分離
- MCP間のデータ受け渡し
- 次フェーズに移る前の検証
- 一元化されたエラーハンドリング

### パターン3: 反復改善

**使用場面**: 反復によって出力品質が向上する場合

**例**: レポート生成

```markdown
# 反復的レポート作成

## 初期ドラフト
1. MCP経由でデータを取得
2. 最初のドラフトレポートを生成
3. 一時ファイルに保存

## 品質チェック
1. 検証スクリプトを実行: `scripts/check_report.py`
2. 問題を特定:
   - セクションの欠落
   - フォーマットの不一致
   - データ検証エラー

## 改善ループ
1. 特定された各問題に対処
2. 影響を受けたセクションを再生成
3. 再検証
4. 品質閾値を満たすまで繰り返し

## 最終化
1. 最終フォーマットを適用
2. サマリーを生成
3. 最終版を保存
```

**主要テクニック**:
- 明示的な品質基準
- 反復的改善
- 検証スクリプト
- 反復を停止するタイミングを認識

### パターン4: コンテキスト対応ツール選択

**使用場面**: 同じ結果でも、コンテキストに応じて異なるツールを使用する場合

**例**: ファイルストレージ

```markdown
# スマートファイルストレージ

## 決定木
1. ファイルタイプとサイズをチェック
2. 最適な保存場所を決定:
   - 大きなファイル（>10MB）: クラウドストレージMCPを使用
   - 共同編集ドキュメント: Notion/Docs MCPを使用
   - コードファイル: GitHub MCPを使用
   - 一時ファイル: ローカルストレージを使用

## ストレージ実行
決定に基づいて:
- 適切なMCPツールを呼び出し
- サービス固有のメタデータを適用
- アクセスリンクを生成

## ユーザーにコンテキストを提供
なぜそのストレージが選択されたかを説明
```

**主要テクニック**:
- 明確な決定基準
- フォールバックオプション
- 選択の透明性

### パターン5: ドメイン固有のインテリジェンス

**使用場面**: スキルがツールアクセス以上の専門知識を追加する場合

**例**: 金融コンプライアンス

```markdown
# コンプライアンス付き支払い処理

## 処理前（コンプライアンスチェック）
1. MCP経由でトランザクション詳細を取得
2. コンプライアンスルールを適用:
   - 制裁リストをチェック
   - 管轄許可を確認
   - リスクレベルを評価
3. コンプライアンス決定を文書化

## 処理
コンプライアンス合格の場合:
  - 支払い処理MCPツールを呼び出し
  - 適切な不正チェックを適用
  - トランザクションを処理
そうでなければ:
  - レビュー用にフラグ
  - コンプライアンスケースを作成

## 監査証跡
- すべてのコンプライアンスチェックを記録
- 処理決定を記録
- 監査レポートを生成
```

**主要テクニック**:
- ロジックに組み込まれたドメイン専門知識
- アクション前のコンプライアンス
- 包括的なドキュメンテーション
- 明確なガバナンス

## テストと反復

スキルは、ニーズに応じて様々なレベルの厳密さでテストできます：

- **Claude.aiでの手動テスト** - クエリを直接実行して動作を観察。高速な反復、セットアップ不要。
- **Claude Codeでのスクリプトテスト** - 変更間で繰り返し検証するためのテストケース自動化。
- **Skills API経由のプログラマティックテスト** - 定義されたテストセットに対して体系的に実行される評価スイートを構築。

品質要件とスキルの可視性に合ったアプローチを選択してください。小規模チームが社内で使用するスキルと、数千のエンタープライズユーザーにデプロイされるスキルでは、テストニーズが異なります。

### プロのヒント: 拡大前に単一タスクで反復

最も効果的なスキル作成者は、Claudeが成功するまで単一の困難なタスクで反復し、その後勝利したアプローチをスキルに抽出します。これはClaudeのコンテキスト内学習を活用し、広範なテストよりも高速なシグナルを提供します。動作する基盤ができたら、カバレッジのために複数のテストケースに拡大します。

### 推奨テストアプローチ

早期の経験に基づくと、効果的なスキルテストは通常3つの領域をカバーします：

#### 1. トリガーテスト

**目標**: スキルが適切なタイミングで読み込まれることを確認

**テストケース**:
- 明白なタスクでトリガーされる
- 言い換えられたリクエストでトリガーされる
- 無関係なトピックでトリガーされない

**テストスイート例**:

```
トリガーすべき:
- 「新しいProjectHubワークスペースをセットアップして」
- 「ProjectHubでプロジェクトを作成する必要がある」
- 「Q4計画のためのProjectHubプロジェクトを初期化」

トリガーすべきでない:
- 「サンフランシスコの天気は？」
- 「Pythonコードを書くのを手伝って」
- 「スプレッドシートを作成」（ProjectHubスキルがシートを処理しない限り）
```

#### 2. 機能テスト

**目標**: スキルが正しい出力を生成することを検証

**テストケース**:
- 有効な出力が生成される
- API呼び出しが成功する
- エラーハンドリングが機能する
- エッジケースがカバーされる

以下の3つのシナリオで網羅的にテストします:

1. **通常操作**: 一般的なリクエストで期待通り動作するか
2. **エッジケース**: 不完全な入力や異常なデータでも適切に処理するか
3. **範囲外リクエスト**: 関連性はあるがスキルの処理対象外のタスクを正しく判別するか

**例**:

```
通常操作テスト: 5つのタスクでプロジェクトを作成

与えられた: プロジェクト名「Q4 Planning」、5つのタスク説明
実行時: スキルがワークフローを実行
期待:
  - ProjectHubでプロジェクトが作成される
  - 正しいプロパティで5つのタスクが作成される
  - すべてのタスクがプロジェクトにリンクされる
  - APIエラーなし

エッジケーステスト: タスクなしでプロジェクトを作成

与えられた: プロジェクト名のみ、タスクなし
期待: プロジェクトは作成され、タスク追加を促す

範囲外テスト: 既存プロジェクトの削除を依頼

与えられた: 「プロジェクトを削除して」
期待: このスキルの対象外であることを説明
```

#### 3. パフォーマンス比較

**目標**: スキルがベースラインと比べて結果を改善することを証明

「成功基準の定義」のメトリクスを使用します。比較例：

**ベースライン比較**:

```
スキルなし:
- ユーザーが毎回指示を提供
- 15往復のメッセージ
- リトライが必要な3回のAPI呼び出し失敗
- 12,000トークン消費

スキルあり:
- 自動ワークフロー実行
- 2つの明確化質問のみ
- 0回のAPI呼び出し失敗
- 6,000トークン消費
```

### skill-creatorの使用

**skill-creator**スキル - Claude.aiのプラグインディレクトリで利用可能、またはClaude Code用にダウンロード可能 - は、スキルの構築と反復を支援します。MCPサーバーと上位2〜3のワークフローがわかっていれば、1回のセッションで機能的なスキルを構築してテストできます - 多くの場合、15〜30分です。

**スキル作成**:
- 自然言語の説明からスキルを生成
- フロントマター付きの適切にフォーマットされたSKILL.mdを生成
- トリガーフレーズと構造を提案

**スキルレビュー**:
- 一般的な問題をフラグ（曖昧な説明、トリガーの欠落、構造的問題）
- 過度/過少トリガーのリスクを特定
- スキルの目的に基づいてテストケースを提案

**反復改善**:
- スキルを使用してエッジケースや失敗に遭遇した後、それらの例をskill-creatorに持ち帰る
- 例: 「このチャットで特定された問題と解決策を使用して、スキルが[特定のエッジケース]を処理する方法を改善してください」

**使用方法**:

```
「skill-creatorスキルを使って[ユースケース]のスキルを構築するのを手伝って」
```

注: skill-creatorはスキルの設計と改善を支援しますが、自動テストスイートを実行したり、定量的評価結果を生成したりはしません。

### フィードバックに基づく改善

スキルは生きたドキュメントです。以下に基づいて反復する計画を立ててください：

**トリガー不足のシグナル**:
- すべきときにスキルが読み込まれない
- ユーザーが手動で有効化する
- いつ使用するかについてのサポート質問

解決策: descriptionにより多くの詳細とニュアンスを追加 - 特に技術用語のキーワードを含める場合があります

**トリガー過多のシグナル**:
- 無関係なクエリでスキルが読み込まれる
- ユーザーが無効化する
- 目的について混乱

解決策: ネガティブトリガーを追加、より具体的にする

**実行問題**:
- 一貫性のない結果
- API呼び出し失敗
- ユーザー修正が必要

解決策: 指示を改善、エラーハンドリングを追加

## 配布と共有

スキルはMCP統合をより完全にします。ユーザーがコネクターを比較するとき、スキル付きのものはより速く価値への道を提供し、MCP専用の代替品に対して優位性を与えます。

### 現在の配布モデル（2026年1月）

#### 個人ユーザーがスキルを入手する方法

1. スキルフォルダをダウンロード
2. フォルダをZIP（必要な場合）
3. Claude.aiに設定 > 機能 > スキルからアップロード
4. またはClaude Codeのスキルディレクトリに配置

#### 組織レベルのスキル

- 管理者がワークスペース全体にスキルをデプロイ可能（2025年12月18日出荷）
- 自動更新
- 一元管理

### オープンスタンダード

AnthropicはAgent Skillsをオープンスタンダードとして公開しました。MCPと同様に、スキルはツールやプラットフォーム間で移植可能であるべきです - 同じスキルがClaudeを使用しているか他のAIプラットフォームを使用しているかに関わらず動作すべきです。とはいえ、一部のスキルは特定のプラットフォームの機能を最大限に活用するように設計されています。作者はスキルの互換性フィールドでこれを記載できます。エコシステムのメンバーとこの標準について協力しており、早期採用に興奮しています。

### API経由でのスキル使用

プログラマティックなユースケース - スキルを活用するアプリケーション、エージェント、自動ワークフローの構築など - の場合、APIはスキル管理と実行に対する直接制御を提供します。

**主要機能**:
- スキルのリストと管理のための`/v1/skills`エンドポイント
- `container.skills`パラメータを介してMessages APIリクエストにスキルを追加
- Claude Console経由のバージョン管理と管理
- カスタムエージェント構築のためのClaude Agent SDKと連携

**API vs Claude.aiでのスキル使用時**:

| ユースケース | 最適な環境 |
|-------------|-----------|
| エンドユーザーがスキルと直接やり取り | Claude.ai / Claude Code |
| 開発中の手動テストと反復 | Claude.ai / Claude Code |
| 個人的、アドホックなワークフロー | Claude.ai / Claude Code |
| プログラマティックにスキルを使用するアプリケーション | API |
| 大規模な本番デプロイメント | API |
| 自動パイプラインとエージェントシステム | API |

注: APIのスキルは、スキルが実行に必要な安全な環境を提供するCode Execution Tool betaを必要とします。

実装の詳細については以下を参照:
- Skills API Quickstart
- Create Custom skills
- Skills in the Agent SDK

### 推奨アプローチ

GitHubでスキルをホストし、公開リポジトリ、明確なREADME（人間の訪問者向け - スキルフォルダとは別で、README.mdを含むべきではありません）、スクリーンショット付きの使用例を用意することから始めます。その後、MCPドキュメントにスキルへのリンク、両方を一緒に使用する価値の説明、クイックスタートガイドを提供するセクションを追加します。

#### 1. GitHubでホスト

- オープンソーススキル用の公開リポジトリ
- インストール手順付きの明確なREADME
- 使用例とスクリーンショット

#### 2. MCPリポジトリでドキュメント化

- MCPドキュメントからスキルへリンク
- 両方を一緒に使用する価値を説明
- クイックスタートガイドを提供

#### 3. インストールガイドを作成

```markdown
# [Your Service] スキルのインストール

1. スキルをダウンロード:
   - リポジトリをクローン: `git clone https://github.com/yourcompany/skills`
   - またはReleasesからZIPをダウンロード

2. Claudeにインストール:
   - Claude.ai > 設定 > スキルを開く
   - 「スキルをアップロード」をクリック
   - スキルフォルダを選択（ZIP化済み）

3. スキルを有効化:
   - [Your Service] スキルをオンに切り替え
   - MCPサーバーが接続されていることを確認

4. テスト:
   - Claudeに質問: 「[Your Service]で新しいプロジェクトをセットアップ」
```

### スキルのポジショニング

スキルの説明方法が、ユーザーがその価値を理解し、実際に試すかどうかを決定します。README、ドキュメント、マーケティングでスキルについて書くときは、これらの原則を念頭に置いてください。

#### 機能ではなく成果に焦点を当てる

良い例:
```
「ProjectHubスキルにより、チームは完全なプロジェクトワークスペース
（ページ、データベース、テンプレートを含む）を数秒で設定でき、
30分の手動設定の代わりになります。」
```

悪い例:
```
「ProjectHubスキルは、MCPサーバーツールを呼び出す
YAMLフロントマターとMarkdown指示を含むフォルダです。」
```

#### MCP + スキルのストーリーを強調

```
「MCPサーバーはClaudeにLinearプロジェクトへのアクセスを提供します。
スキルはClaudeにチームのスプリント計画ワークフローを教えます。
一緒に使うことで、AI駆動のプロジェクト管理が可能になります。」
```

## トラブルシューティング

### スキルがアップロードできない

**エラー: 「アップロードされたフォルダにSKILL.mdが見つかりません」**

原因: ファイルが正確にSKILL.mdという名前でない

解決策:
- SKILL.mdにリネーム（大文字小文字を区別）
- 確認: `ls -la`でSKILL.mdが表示されるはず

**エラー: 「無効なフロントマター」**

原因: YAMLフォーマットの問題

一般的な間違い:

```yaml
# 間違い - デリミタがない
name: my-skill
description: Does things

# 間違い - 閉じられていない引用符
name: my-skill
description: "Does things

# 正しい
---
name: my-skill
description: Does things
---
```

**エラー: 「無効なスキル名」**

原因: 名前にスペースまたは大文字が含まれる

```yaml
# 間違い
name: My Cool Skill

# 正しい
name: my-cool-skill
```

### スキルがトリガーされない

**症状**: スキルが自動的に読み込まれない

修正:

descriptionフィールドを修正します。良い/悪い例については「descriptionフィールド」を参照。

クイックチェックリスト:
- 汎用的すぎないか？（「プロジェクトを支援」は機能しない）
- ユーザーが実際に言いそうなトリガーフレーズを含んでいるか？
- 該当する場合、関連ファイルタイプに言及しているか？

デバッグアプローチ:

Claudeに質問: 「[スキル名]スキルをいつ使用しますか？」Claudeがdescriptionを引用して返します。不足しているものに基づいて調整します。

### スキルが頻繁にトリガーされる

**症状**: 無関係なクエリでスキルが読み込まれる

解決策:

1. ネガティブトリガーを追加

```yaml
description: CSV ファイルの高度なデータ分析。統計モデリング、回帰、クラスタリングに使用。シンプルなデータ探索には使用しない（代わりにdata-vizスキルを使用）。
```

2. より具体的にする

```yaml
# 広すぎる
description: ドキュメントを処理

# より具体的
description: 契約レビュー用のPDF法的ドキュメントを処理
```

3. スコープを明確化

```yaml
description: eコマース向けPayFlow支払い処理。オンライン支払いワークフロー専用に使用、一般的な金融クエリには使用しない。
```

### MCP接続の問題

**症状**: スキルが読み込まれるがMCP呼び出しが失敗

チェックリスト:

1. MCPサーバーが接続されているか確認
   - Claude.ai: 設定 > 拡張機能 > [Your Service]
   - 「接続済み」ステータスが表示されるはず

2. 認証をチェック
   - APIキーが有効で期限切れでない
   - 適切な権限/スコープが付与されている
   - OAuthトークンが更新されている

3. MCPを独立してテスト
   - スキルなしでClaudeにMCPを直接呼び出させる
   - 「[Service] MCPを使って私のプロジェクトを取得して」
   - これが失敗する場合、問題はスキルではなくMCP

4. ツール名を確認
   - スキルが正しいMCPツール名を参照
   - MCPサーバードキュメントをチェック
   - ツール名は大文字小文字を区別

### 指示が守られない

**症状**: スキルが読み込まれるがClaudeが指示に従わない

一般的な原因:

1. 指示が冗長すぎる
   - 指示を簡潔に保つ
   - 箇条書きと番号付きリストを使用
   - 詳細なリファレンスは別ファイルに移動

2. 指示が埋もれている
   - 重要な指示を上部に配置
   - `## Important`または`## Critical`ヘッダーを使用
   - 必要に応じて重要ポイントを繰り返す

3. 曖昧な言語

```markdown
# 悪い
適切に検証してください

# 良い
重要: create_projectを呼び出す前に検証:
- プロジェクト名が空でない
- 少なくとも1人のチームメンバーが割り当てられている
- 開始日が過去でない
```

**高度なテクニック**: 重要な検証には、言語指示に依存するのではなく、チェックをプログラマティックに実行するスクリプトをバンドルすることを検討してください。コードは決定論的ですが、言語解釈はそうではありません。このパターンの例については、Officeスキルを参照してください。

4. モデルの「怠惰」

明示的な励ましを追加:

```markdown
# パフォーマンスノート
- これを徹底的に行うために時間をかけてください
- 品質はスピードより重要
- 検証ステップをスキップしないでください
```

注: これをユーザープロンプトに追加する方が、SKILL.mdに追加するよりも効果的です。

### 大きなコンテキストの問題

**症状**: スキルが遅い、またはレスポンスが劣化

原因:
- スキルコンテンツが大きすぎる
- 同時に有効化されているスキルが多すぎる
- プログレッシブディスクロージャーの代わりにすべてのコンテンツが読み込まれる

解決策:

1. SKILL.mdのサイズを最適化
   - 詳細なドキュメントをreferences/に移動
   - インラインの代わりにリファレンスへリンク
   - SKILL.mdを5,000語未満に保つ

2. 有効化されているスキルを減らす
   - 同時に20〜50以上のスキルが有効か評価
   - 選択的な有効化を推奨
   - 関連機能のスキル「パック」を検討

## リファレンス

### YAMLフロントマター完全仕様

#### 必須フィールド

```yaml
---
name: skill-name-in-kebab-case
description: 何をするか、いつ使用するか。具体的なトリガーフレーズを含む。
---
```

#### すべてのオプションフィールド

```yaml
---
name: skill-name
description: [必須の説明]
license: MIT # オプション: オープンソースのライセンス
allowed-tools: "Bash(python:*) Bash(npm:*) WebFetch" # オプション: ツールアクセスを制限
metadata: # オプション: カスタムフィールド
  author: Company Name
  version: 1.0.0
  mcp-server: server-name
  category: productivity
  tags: [project-management, automation]
  documentation: https://example.com/docs
  support: support@example.com
---
```

#### 許可されるもの

- 任意の標準YAMLタイプ（文字列、数値、ブール値、リスト、オブジェクト）
- カスタムメタデータフィールド
- 長い説明（最大1024文字）

#### 禁止されているもの

- XML角括弧（`<` `>`）- セキュリティ制限
- YAMLでのコード実行（安全なYAML解析を使用）
- 「claude」または「anthropic」プレフィックスを持つスキル名（予約済み）

### クイックチェックリスト

#### 開始前

- [ ] 2〜3の具体的なユースケースを特定
- [ ] ツールを特定（組み込みまたはMCP）
- [ ] このガイドとサンプルスキルをレビュー
- [ ] フォルダ構造を計画

#### 開発中

- [ ] フォルダ名がケバブケース
- [ ] SKILL.mdファイルが存在（正確なスペル）
- [ ] YAMLフロントマターに`---`デリミタがある
- [ ] nameフィールド: ケバブケース、スペースなし、大文字なし
- [ ] descriptionに「何を」と「いつ」を含む
- [ ] XMLタグ（`<` `>`）がどこにもない
- [ ] 指示が明確で実行可能
- [ ] エラーハンドリングが含まれる
- [ ] 例が提供される
- [ ] リファレンスが明確にリンクされる
- [ ] 明白なタスクでのトリガーをテスト
- [ ] 言い換えられたリクエストでのトリガーをテスト
- [ ] 無関係なトピックでトリガーされないことを検証
- [ ] 機能テストが合格
- [ ] ツール統合が動作（該当する場合）
- [ ] .zipファイルとして圧縮

#### アップロード後

- [ ] 実際の会話でテスト
- [ ] トリガー不足/過多を監視
- [ ] ユーザーフィードバックを収集
- [ ] descriptionと指示を反復
- [ ] メタデータでバージョンを更新

## まとめ

Claude Skillsは、ワークフローの自動化と標準化を実現する強力なツールです。

### 重要なポイント

1. **明確な目的**: 何を自動化するかを明確に定義
2. **段階的な実装**: 小さく始めて徐々に拡張
3. **プログレッシブディスクロージャー**: 3レベルシステムでトークン使用を最適化
4. **テストと改善**: 継続的にフィードバックを収集し反復
5. **ドキュメント**: 使い方を丁寧に説明
6. **共有**: チーム全体で知識を共有

### 次のステップ

- [ ] 自動化したいワークフローを1つ選ぶ
- [ ] skill-creatorを使って最初のスキルを15〜30分で作成
- [ ] 実際に使ってフィードバックを収集
- [ ] チームメンバーと共有
- [ ] 継続的に改善

### スキル構築は反復的なプロセス

最初から完璧を目指すのではなく、小さく始めて改善を重ねていくことが成功の鍵です。

### MCP統合との相乗効果

MCPサーバーを構築している場合、スキルは統合を完全にします。ユーザーがコネクターを比較するとき、スキル付きのものはより速く価値を提供し、競合優位性を生み出します。

## 参考リンク

### 公式ドキュメント

**Anthropicリソース**:
- [Best Practices Guide](https://docs.anthropic.com/en/docs/build-with-claude/skills)
- [Skills Documentation](https://docs.anthropic.com/en/docs/build-with-claude/skills)
- [API Reference](https://docs.anthropic.com/en/api)
- [MCP Documentation](https://modelcontextprotocol.io/)

**ブログ記事**:
- [Introducing Agent Skills](https://www.anthropic.com/news/agent-skills)
- [Engineering Blog: Equipping Agents for the Real World](https://www.anthropic.com/engineering)
- [Complete Guide to Building Skills for Claude](https://claude.com/blog/complete-guide-to-building-skills-for-claude)
- [Skills Overview](https://claude.com/skills)
- [Skills Explained](https://claude.com/blog/skills-explained)
- [How to Create Skills](https://claude.com/blog/how-to-create-skills-key-steps-limitations-and-examples)

### サンプルスキル

**公式スキルリポジトリ**:
- [GitHub: anthropics/skills](https://github.com/anthropics/skills) - Anthropic作成のスキル、カスタマイズ可能

**ドキュメントスキル**:
- PDF、DOCX、PPTX、XLSX作成

**パートナースキル**:
- Asana、Atlassian、Canva、Figma、Sentry、Zapierなど

### ツールとユーティリティ

**skill-creatorスキル**:
- Claude.aiに組み込み、Claude Code用に利用可能
- 説明からスキルを生成
- レビューと推奨を提供
- 使用方法: 「skill-creatorを使ってスキルを構築するのを手伝って」

**検証**:
- skill-creatorでスキルを評価可能
- 質問: 「このスキルをレビューして改善を提案して」

### サポート

**技術的な質問**:
- 一般的な質問: [Claude Developers Discord](https://discord.gg/anthropic)のコミュニティフォーラム

**バグレポート**:
- [GitHub Issues: anthropics/skills/issues](https://github.com/anthropics/skills/issues)
- 含める内容: スキル名、エラーメッセージ、再現手順

### API関連

- [Skills API Quickstart](https://docs.anthropic.com/en/docs/build-with-claude/skills/api-quickstart)
- [Create Custom Skills](https://docs.anthropic.com/en/docs/build-with-claude/skills/create-skills)
- [Skills in the Agent SDK](https://docs.anthropic.com/en/docs/build-with-claude/agent-sdk)

---

このガイドは[The Complete Guide to Building Skills for Claude](https://resources.anthropic.com/hubfs/The-Complete-Guide-to-Building-Skill-for-Claude.pdf)（2026年1月29日公開）を基に作成されました。
